<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<script type="module">
    import { io } from 'https://cdn.socket.io/4.3.2/socket.io.esm.min.js';

    const ws = new io('ws://localhost:3000',{
        auth: {
            jwt: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZFVzdWFyaW8iOiIzYjE2MzE1MC0yNzZiLTQ4NTUtODgwNi05MDlkNmI2YjMzOTIiLCJlbWFpbCI6ImNvY2luYUBnbWFpbC5jb20iLCJ0aXBvVXN1YXJpbyI6IlNlY3RvckNvY2luYSIsInVzZXJuYW1lIjoic2VjdG9yY29jaW5hIiwiaWF0IjoxNzU1ODk0NzcyLCJleHAiOjE3NTY0OTk1NzJ9.EFExde8szfLBcaMkay4Jv9BqB9x4Xb98BDieU0NykuI"
        }
    });

    ws.emit('updateLineStatus', {idPedido: 102, nroLinea: 1, estadoLP: 'En_Preparacion'})
    
    ws.on('activeOrders', (data) => {
        console.log(data)
    })

    ws.on('errorEvent', (data) => {
        console.log(data)
    })
    
    ws.on('updatedOrderStatus', (data) => {
        console.log(data)
    })
    
    ws.on('updatedOrderLineStatus', (data) => {
        console.log(data)
    })

    ws.on('open', () => {
        console.log('WebSocket connection opened');
        ws.send('Hello, server!');
    });

    ws.on('message', (data) => {
        console.log('Received message:', data);
    });

    ws.on("newOrder", (order) => {
        console.log(order);
    })

    ws.on('close', () => {
        console.log('WebSocket connection closed');
    });

    ws.on('error', (error) => {
        console.error('WebSocket error:', error);
    });
</script>
<body>
    <h1>Test WebSockets </h1>
</body>
</html>